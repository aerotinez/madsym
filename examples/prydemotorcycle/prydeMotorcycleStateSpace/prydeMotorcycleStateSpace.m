function sys = prydeMotorcycleStateSpace(p)
   %    states = [v_rx omega_r omega_f varphi delta omega_bz v_ry omega_bx omega_delta]
   %    inputs = [tau_r tau_br tau_bf tau_delta]
   %    params = [A C_d C_delta C_l C_p I_bxx I_bxz I_bzz I_hxx I_hzz K_xkf K_xkr K_yaf K_ycf K_ygf K_yar K_ycr K_ygr K_yvf K_yvr K_zaf K_zgf K_zar K_zgr V a a_n b e f g h i_fy i_ry m_b m_f m_h m_r rho rho_f rho_r t_f t_r varepsilon]
   M = prydeMotorcycleSSMassMatrix(p);
   H = prydeMotorcycleSSForcingMatrix(p);
   G = prydeMotorcycleSSInputMatrix(p);
   sys = ss(H,G,eye(size(H)),0);

   sys.E = M;

   sys.Offsets.dx = [
      0;
      0;
      0;
      0;
      0;
      0;
      0;
      0;
      0;
   ];

   sys.Offsets.x = [
      p(25,:);
      -(p(25,:)*(4*p(12,:)*p(27,:) - 4*p(12,:)*p(26,:) - 4*p(12,:)*p(28,:)*cos(p(44,:)) - 4*p(17,:)*p(26,:)*p(31,:)*p(35,:) + 4*p(17,:)*p(27,:)*p(31,:)*p(35,:) - 4*p(17,:)*p(26,:)*p(31,:)*p(37,:) - 4*p(17,:)*p(26,:)*p(31,:)*p(38,:) + 4*p(17,:)*p(27,:)*p(31,:)*p(37,:) + 4*p(17,:)*p(27,:)*p(31,:)*p(38,:) + 4*p(17,:)*p(26,:)*p(31,:)*p(37,:)*cos(p(44,:))^2 + 4*p(17,:)*p(29,:)*p(31,:)*p(37,:)*cos(p(44,:))^2 - 2*p(17,:)*p(30,:)*p(31,:)*p(37,:)*sin(2*p(44,:)) - 4*p(20,:)*p(25,:)*p(26,:)*p(31,:)*p(35,:) + 4*p(20,:)*p(25,:)*p(27,:)*p(31,:)*p(35,:) - 4*p(20,:)*p(25,:)*p(26,:)*p(31,:)*p(37,:) - 4*p(20,:)*p(25,:)*p(26,:)*p(31,:)*p(38,:) + 4*p(20,:)*p(25,:)*p(27,:)*p(31,:)*p(37,:) + 4*p(20,:)*p(25,:)*p(27,:)*p(31,:)*p(38,:) - 2*p(1,:)*p(2,:)*p(25,:)^2*p(26,:)*p(39,:) + 2*p(1,:)*p(2,:)*p(25,:)^2*p(27,:)*p(39,:) - 4*p(17,:)*p(28,:)*p(31,:)*p(38,:)*cos(p(44,:)) + p(1,:)*p(4,:)*p(17,:)*p(25,:)^2*p(26,:)*p(39,:) - p(1,:)*p(4,:)*p(17,:)*p(25,:)^2*p(27,:)*p(39,:) - 2*p(1,:)*p(5,:)*p(17,:)*p(25,:)^2*p(26,:)*p(39,:) + 2*p(1,:)*p(5,:)*p(17,:)*p(25,:)^2*p(27,:)*p(39,:) + p(1,:)*p(4,:)*p(20,:)*p(25,:)^3*p(26,:)*p(39,:) - p(1,:)*p(4,:)*p(20,:)*p(25,:)^3*p(27,:)*p(39,:) - 2*p(1,:)*p(5,:)*p(20,:)*p(25,:)^3*p(26,:)*p(39,:) + 2*p(1,:)*p(5,:)*p(20,:)*p(25,:)^3*p(27,:)*p(39,:) - 4*p(20,:)*p(25,:)*p(28,:)*p(31,:)*p(38,:)*cos(p(44,:)) - 2*p(1,:)*p(2,:)*p(25,:)^2*p(28,:)*p(39,:)*cos(p(44,:)) + 4*p(20,:)*p(25,:)*p(26,:)*p(31,:)*p(37,:)*cos(p(44,:))^2 + 4*p(20,:)*p(25,:)*p(29,:)*p(31,:)*p(37,:)*cos(p(44,:))^2 - 2*p(20,:)*p(25,:)*p(30,:)*p(31,:)*p(37,:)*sin(2*p(44,:)) + p(1,:)*p(4,:)*p(17,:)*p(25,:)^2*p(28,:)*p(39,:)*cos(p(44,:)) - 2*p(1,:)*p(5,:)*p(17,:)*p(25,:)^2*p(28,:)*p(39,:)*cos(p(44,:)) + p(1,:)*p(4,:)*p(20,:)*p(25,:)^3*p(28,:)*p(39,:)*cos(p(44,:)) - 2*p(1,:)*p(5,:)*p(20,:)*p(25,:)^3*p(28,:)*p(39,:)*cos(p(44,:)) + 2*p(1,:)*p(2,:)*p(17,:)*p(25,:)^2*p(39,:)*p(41,:)*cos(p(44,:)) + 2*p(1,:)*p(2,:)*p(17,:)*p(25,:)^2*p(39,:)*p(43,:)*cos(p(44,:)) + 2*p(1,:)*p(2,:)*p(20,:)*p(25,:)^3*p(39,:)*p(41,:)*cos(p(44,:)) + 2*p(1,:)*p(2,:)*p(20,:)*p(25,:)^3*p(39,:)*p(43,:)*cos(p(44,:))))/(4*p(12,:)*(p(41,:) + p(43,:))*(p(26,:) - p(27,:) + p(28,:)*cos(p(44,:))));
      (p(25,:)*(4*p(11,:)*p(26,:) - 4*p(11,:)*p(27,:) + 4*p(11,:)*p(28,:)*cos(p(44,:)) + 4*p(14,:)*p(26,:)*p(31,:)*p(36,:) - 4*p(14,:)*p(27,:)*p(31,:)*p(36,:) + 4*p(14,:)*p(26,:)*p(31,:)*p(37,:)*cos(p(44,:))^2 + 4*p(14,:)*p(29,:)*p(31,:)*p(37,:)*cos(p(44,:))^2 - 2*p(14,:)*p(30,:)*p(31,:)*p(37,:)*sin(2*p(44,:)) + 4*p(19,:)*p(25,:)*p(26,:)*p(31,:)*p(36,:) - 4*p(19,:)*p(25,:)*p(27,:)*p(31,:)*p(36,:) + 4*p(14,:)*p(28,:)*p(31,:)*p(35,:)*cos(p(44,:)) + 4*p(14,:)*p(28,:)*p(31,:)*p(36,:)*cos(p(44,:)) + 4*p(14,:)*p(28,:)*p(31,:)*p(37,:)*cos(p(44,:)) - p(1,:)*p(4,:)*p(14,:)*p(25,:)^2*p(26,:)*p(39,:) + p(1,:)*p(4,:)*p(14,:)*p(25,:)^2*p(27,:)*p(39,:) - 2*p(1,:)*p(5,:)*p(14,:)*p(25,:)^2*p(26,:)*p(39,:) + 2*p(1,:)*p(5,:)*p(14,:)*p(25,:)^2*p(27,:)*p(39,:) - p(1,:)*p(4,:)*p(19,:)*p(25,:)^3*p(26,:)*p(39,:) + p(1,:)*p(4,:)*p(19,:)*p(25,:)^3*p(27,:)*p(39,:) - 2*p(1,:)*p(5,:)*p(19,:)*p(25,:)^3*p(26,:)*p(39,:) + 2*p(1,:)*p(5,:)*p(19,:)*p(25,:)^3*p(27,:)*p(39,:) + 4*p(19,:)*p(25,:)*p(28,:)*p(31,:)*p(35,:)*cos(p(44,:)) + 4*p(19,:)*p(25,:)*p(28,:)*p(31,:)*p(36,:)*cos(p(44,:)) + 4*p(19,:)*p(25,:)*p(28,:)*p(31,:)*p(37,:)*cos(p(44,:)) + 4*p(19,:)*p(25,:)*p(26,:)*p(31,:)*p(37,:)*cos(p(44,:))^2 + 4*p(19,:)*p(25,:)*p(29,:)*p(31,:)*p(37,:)*cos(p(44,:))^2 - 2*p(19,:)*p(25,:)*p(30,:)*p(31,:)*p(37,:)*sin(2*p(44,:)) - p(1,:)*p(4,:)*p(14,:)*p(25,:)^2*p(28,:)*p(39,:)*cos(p(44,:)) - 2*p(1,:)*p(5,:)*p(14,:)*p(25,:)^2*p(28,:)*p(39,:)*cos(p(44,:)) - p(1,:)*p(4,:)*p(19,:)*p(25,:)^3*p(28,:)*p(39,:)*cos(p(44,:)) - 2*p(1,:)*p(5,:)*p(19,:)*p(25,:)^3*p(28,:)*p(39,:)*cos(p(44,:)) + 2*p(1,:)*p(2,:)*p(14,:)*p(25,:)^2*p(39,:)*p(41,:)*cos(p(44,:)) + 2*p(1,:)*p(2,:)*p(14,:)*p(25,:)^2*p(39,:)*p(43,:)*cos(p(44,:)) + 2*p(1,:)*p(2,:)*p(19,:)*p(25,:)^3*p(39,:)*p(41,:)*cos(p(44,:)) + 2*p(1,:)*p(2,:)*p(19,:)*p(25,:)^3*p(39,:)*p(43,:)*cos(p(44,:))))/(4*p(11,:)*(p(40,:) + p(42,:))*(p(26,:) - p(27,:) + p(28,:)*cos(p(44,:))));
      0;
      0;
      0;
      0;
      0;
      0;
   ];

   sys.Offsets.u = [
      (p(1,:)*p(2,:)*p(25,:)^2*p(39,:)*(p(41,:) + p(43,:)))/2;
      0;
      0;
      0;
   ];

   sys.StateName = [
      "v_rx";
      "omega_r";
      "omega_f";
      "varphi";
      "delta";
      "omega_bz";
      "v_ry";
      "omega_bx";
      "omega_delta";
   ];

   sys.InputName = [
      "tau_r";
      "tau_br";
      "tau_bf";
      "tau_delta";
   ];

   sys.OutputName = [
      "v_rx";
      "omega_r";
      "omega_f";
      "varphi";
      "delta";
      "omega_bz";
      "v_ry";
      "omega_bx";
      "omega_delta";
   ];

end
